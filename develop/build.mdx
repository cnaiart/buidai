---
title: "æ„å»ºæ–‡æ¡£"
description: "å¸¦ä½ å¦‚ä½•æ„å»ºPCå®¢æˆ·ç«¯"
icon: 'cog'
---

## ğŸ’¡ æ„å»ºäº§ç‰©è·¯å¾„

| å¹³å° | æ„å»ºäº§ç‰©è·¯å¾„ |
|------|-------------|
| Windows | `[é¡¹ç›®æ ¹ç›®å½•]/packages/desktop/src-tauri/target/release/bundle/msi/xxx.msi` |
| Windows | `[é¡¹ç›®æ ¹ç›®å½•]/packages/desktop/src-tauri/target/release/bundle/nsis/xxx.exe` |
| macOS | `[é¡¹ç›®æ ¹ç›®å½•]/packages/desktop/src-tauri/target/release/bundle/dmg/` |

<Warning>
**macOS å®‰è£…æç¤º**

å¦‚æœæç¤ºåŒ…å·²æŸåï¼Œè¯·åœ¨ç»ˆç«¯ä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œç„¶åè¾“å…¥å¯†ç å›è½¦å³å¯é‡æ–°æ‰“å¼€ï¼š

```shell
sudo xattr -r -d com.apple.quarantine [å®‰è£…åŒ…è·¯å¾„]
```
</Warning>

## å›¾æ ‡ä¿®æ”¹

å®˜æ–¹æ¨èä½¿ç”¨ `icns-generator` å·¥å…·ç”Ÿæˆå›¾æ ‡ã€‚

<Steps>
  <Step title="å®‰è£…å·¥å…·">
    å®‰è£…å®˜æ–¹å›¾æ ‡ç”Ÿæˆå·¥å…·ï¼š
    ```shell
    npm install -g icns-generator
    ```
    æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸï¼ˆè¾“å‡ºç‰ˆæœ¬å· 1.1.x åˆ™è¯´æ˜å®‰è£…æˆåŠŸï¼‰ï¼š
    ```shell
    icns-generator --version
    ```
  </Step>
  <Step title="å‡†å¤‡å›¾æ ‡">
    åˆ›å»ºä¸€ä¸ªåä¸º `icons` çš„ç›®å½•ï¼Œå°†å‡†å¤‡å¥½çš„å›¾æ ‡ï¼ˆpng/jpg/jpegï¼Œå»ºè®® 1024x1024ï¼‰å‘½åä¸º `icon.png` æ”¾å…¥è¯¥ç›®å½•ã€‚
  </Step>
  <Step title="ç”Ÿæˆå›¾æ ‡">
    åœ¨ç»ˆç«¯è¿›å…¥ `icons` ç›®å½•å¹¶æ‰§è¡Œï¼š
    ```shell
    icns-generator --input icon.png
    ```
    æ‰§è¡Œåä¼šç”Ÿæˆ `output` ç›®å½•ï¼ŒåŒ…å«ä»¥ä¸‹æ–‡ä»¶ï¼š
    ```text
    icons
    â”œâ”€â”€ icon.iconset
    â”‚   â”œâ”€â”€ icon_32x32.png
    â”‚   â”œâ”€â”€ icon_128x128.png
    â”‚   â”œâ”€â”€ icon_128x128@2x.png
    â”‚   â””â”€â”€ icon_xxx.png
    â””â”€â”€ icons
        â”œâ”€â”€ 32x32.png
        â”œâ”€â”€ 128x128.png
        â”œâ”€â”€ 128x128@2x.png
        â”œâ”€â”€ xxx.png
        â”œâ”€â”€ icon.ico
        â””â”€â”€ icon.icnsï¼ˆmacOSä¸“å±ï¼ŒWindowsç³»ç»Ÿä¸ä¼šç”Ÿæˆï¼‰
    ```
  </Step>
  <Step title="æ›¿æ¢å›¾æ ‡">
    å¤åˆ¶ä»¥ä¸‹æ–‡ä»¶è‡³ `[é¡¹ç›®æ ¹ç›®å½•]/packages/desktop/src-tauri/icons` ç›®å½•ä¸‹æ›¿æ¢é»˜è®¤å›¾æ ‡ï¼š
    *   `icon.ico`
    *   `icon.icns`ï¼ˆWindows ä¸éœ€è¦ï¼‰
    *   `icon_32x32.png`
    *   `icon_128x128.png`
    *   `icon_128x128@2x.png`
  </Step>
  <Step title="é‡æ–°æ„å»º">
    ä¿®æ”¹å®Œæˆåéœ€è¦é‡æ–°æ„å»ºæ‰èƒ½ç”Ÿæ•ˆï¼š
    ```shell
    pnpm build:desktop
    ```
  </Step>
</Steps>

## ä¿®æ”¹é…ç½®

### ä¿®æ”¹çª—å£æ ‡é¢˜ä¸åº”ç”¨åŒ…å

å¦‚æœä½ æƒ³ä¿®æ”¹æ¡Œé¢åº”ç”¨çª—å£æ ‡é¢˜ï¼ˆä»¥åŠåº”ç”¨åŒ…åï¼‰ï¼Œè¯·ç¼–è¾‘ `src-tauri/tauri.conf.json`ï¼š

```json src-tauri/tauri.conf.json
{
  "productName": "BuildingAI",
  "app": {
    "windows": [
      {
        "title": "BuildingAI"
      }
    ]
  }
}
```

<Note>
*   ä¿®æ”¹ `productName` å¯ä»¥æ›´æ”¹ç³»ç»Ÿä¸å®‰è£…å™¨é‡Œæ˜¾ç¤ºçš„åº”ç”¨åç§°ã€‚
*   ä¿®æ”¹ `app.windows[0].title` å¯ä»¥æ›´æ”¹çª—å£æ ‡é¢˜æ ä¸­æ˜¾ç¤ºçš„æ ‡é¢˜ã€‚
</Note>

ä¿®æ”¹å®Œæˆåæ‰§è¡Œæ„å»ºï¼š
```shell
pnpm build:desktop
```

### æ‰“åŒ…çº¿ä¸Šéƒ¨ç½²åœ°å€

å¦‚æœæƒ³è®©æ¡Œé¢åº”ç”¨æ‰“å¼€ä¸€ä¸ªçº¿ä¸Šç½‘ç«™ï¼ˆä¾‹å¦‚ `https://ä½ çš„é¡¹ç›®çº¿ä¸Šéƒ¨ç½²åœ°å€`ï¼‰ï¼š

1. ç¼–è¾‘ `src-tauri/tauri.conf.json`ï¼š

```json src-tauri/tauri.conf.json
{
  "build": {
    "devUrl": "http://localhost:4090",
    "frontendDist": "https://ä½ çš„é¡¹ç›®çº¿ä¸Šéƒ¨ç½²åœ°å€",
    "beforeDevCommand": "pnpm run prepare",
    "beforeBuildCommand": "pnpm run prepare"
  }
}
```

2. æ‰§è¡Œæ„å»ºï¼š

```shell
pnpm build:desktop
```

<Tip>
æ­¤æ—¶ `frontendDist` æ˜¯ URLï¼Œ`prepare-frontend.js` ä¼šè·³è¿‡ä¿®æ”¹ï¼Œç›´æ¥ä½¿ç”¨è¿œç¨‹åœ°å€ã€‚
</Tip>

### æ‰“åŒ…æœ¬åœ°é™æ€èµ„æº

å¦‚æœæƒ³æŠŠå‰ç«¯æ„å»ºäº§ç‰©ä¸€èµ·æ‰“åŒ…è¿›æ¡Œé¢åº”ç”¨ï¼š

1. è®¾ç½® `src-tauri/tauri.conf.json` ä¸­çš„ `frontendDist` ä¸ºæœ¬åœ°ç›®å½•è·¯å¾„ï¼š

```json src-tauri/tauri.conf.json
{
  "build": {
    "devUrl": "http://localhost:4090",
    "frontendDist": "../../../public/web",
    "beforeDevCommand": "pnpm run prepare",
    "beforeBuildCommand": "pnpm run prepare"
  }
}
```

2. æ‰§è¡Œæ„å»ºï¼š

```shell
pnpm build:desktop
```

<Tip>
æ­¤æ—¶ `frontendDist` æ˜¯æœ¬åœ°ç›®å½•ï¼Œ`prepare-frontend.js` ä¼šè‡ªåŠ¨åœ¨ `public/web` å’Œ `public` ä¹‹é—´é€‰æ‹©ï¼Œå¹¶å†™å›é…ç½®ã€‚
</Tip>

## é¡¹ç›®é…ç½®è¯¦è§£

æ¡Œé¢åº”ç”¨çš„æ ¸å¿ƒé…ç½®åœ¨ `src-tauri/tauri.conf.json` ä¸­ï¼Œä¸»è¦å­—æ®µè¯´æ˜å¦‚ä¸‹ï¼š

<AccordionGroup>
  <Accordion title="åŸºç¡€é…ç½®">
    *   **$schema**ï¼šTauri é…ç½®çš„ schema åœ°å€ï¼Œç”¨äº IDE æ ¡éªŒå’Œè‡ªåŠ¨è¡¥å…¨ã€‚
    *   **productName**ï¼šåº”ç”¨äº§å“åç§°ï¼Œå®‰è£…å™¨å’Œç³»ç»Ÿä¸­æ˜¾ç¤ºçš„åç§°ã€‚
    *   **version**ï¼šåº”ç”¨ç‰ˆæœ¬å·å­—ç¬¦ä¸²ã€‚
    *   **identifier**ï¼šåº”ç”¨å”¯ä¸€æ ‡è¯†ï¼ˆç±»ä¼¼ bundle idï¼‰ï¼Œå¦‚ `buildingai.desktop`ã€‚
  </Accordion>

  <Accordion title="æ„å»ºé…ç½® (build)">
    *   **build.devUrl**ï¼šå¼€å‘æ¨¡å¼åŠ è½½çš„åœ°å€ï¼ˆé€šå¸¸æ˜¯æœ¬åœ° dev serverï¼‰ã€‚
    *   **build.frontendDist**ï¼š
        *   è®¾ç½®ä¸ºè¿œç¨‹ URL æ—¶ï¼Œæ¡Œé¢åº”ç”¨ä¼šç›´æ¥æ‰“å¼€çº¿ä¸Šç½‘ç«™ï¼›
        *   è®¾ç½®ä¸ºæœ¬åœ°ç›®å½•æ—¶ï¼Œä¼šæŠŠé™æ€èµ„æºæ‰“åŒ…åˆ°åº”ç”¨ä¸­ã€‚
    *   **build.beforeDevCommand**ï¼šå¯åŠ¨å¼€å‘è°ƒè¯•å‰æ‰§è¡Œçš„å‘½ä»¤ï¼ˆä¾‹å¦‚å‰ç«¯é¢„å¤„ç†ï¼‰ã€‚
    *   **build.beforeBuildCommand**ï¼šæ„å»ºæ¡Œé¢å®‰è£…åŒ…å‰æ‰§è¡Œçš„å‘½ä»¤ã€‚
  </Accordion>

  <Accordion title="åº”ç”¨ä¸çª—å£é…ç½® (app)">
    *   **app.windows**ï¼šçª—å£é…ç½®åˆ—è¡¨ï¼š
        *   **title**ï¼šçª—å£æ ‡é¢˜ã€‚
        *   **width / height**ï¼šåˆå§‹çª—å£å®½é«˜ã€‚
        *   **minWidth / minHeight**ï¼šçª—å£æœ€å°å°ºå¯¸é™åˆ¶ã€‚
        *   **devtools**ï¼šå¼€å‘ç¯å¢ƒæ˜¯å¦å…è®¸æ‰“å¼€ DevToolsã€‚
        *   **center**ï¼šå¯åŠ¨æ—¶æ˜¯å¦å±…ä¸­æ˜¾ç¤ºçª—å£ã€‚
    *   **app.security.csp**ï¼šContent Security Policyï¼Œ`null` è¡¨ç¤ºä½¿ç”¨ Tauri é»˜è®¤ç­–ç•¥ã€‚
  </Accordion>

  <Accordion title="æ‰“åŒ…é…ç½® (bundle)">
    *   **bundle.active**ï¼šæ˜¯å¦å¯ç”¨æ‰“åŒ…ï¼ˆç”Ÿæˆå®‰è£…åŒ…ï¼‰ã€‚
    *   **bundle.targets**ï¼šæ‰“åŒ…ç›®æ ‡å¹³å°ï¼ˆä¾‹å¦‚ `all` è¡¨ç¤ºæ‰€æœ‰æ”¯æŒçš„å¹³å°ï¼‰ã€‚
    *   **bundle.icon**ï¼šä¸åŒå¹³å°å’Œåˆ†è¾¨ç‡ä½¿ç”¨çš„å›¾æ ‡æ–‡ä»¶åˆ—è¡¨ã€‚
  </Accordion>
</AccordionGroup>

æ ¹æ®éœ€è¦è°ƒæ•´è¿™äº›å­—æ®µåï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤é‡æ–°æ„å»ºæ¡Œé¢åº”ç”¨ï¼š

```shell
pnpm build:desktop
```
